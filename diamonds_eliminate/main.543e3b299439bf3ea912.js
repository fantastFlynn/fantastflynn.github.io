!function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=6)}([function(t,n,e){var i=e(1);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(3)(i,o);i.locals&&(t.exports=i.locals)},function(t,n,e){(t.exports=e(2)(!0)).push([t.i,"* {\n  margin: 0;\n  padding: 0;\n}\nbody {\n  background: rgba(238, 238, 238, 0.1);\n}\n.layout {\n  text-align: center;\n  display: inline-block;\n  margin: 5px;\n  position: relative;\n}\n.wrap {\n  outline: 2px solid #000;\n  display: inline-block;\n  position: relative;\n}\n.row {\n  font-size: 0;\n}\n.cell {\n  display: inline-block;\n  width: 33px;\n  height: 33px;\n  box-sizing: border-box;\n  border: 1px dashed #eee;\n}\n.cell[bg] {\n  background-color: #333;\n  border: 2px solid #aaa;\n}\n.score {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 200px;\n  height: 200px;\n  margin: auto;\n  font-size: 20px;\n  color: #000;\n}\n.functionArea {\n  text-align: center;\n}\n.btn {\n  padding: 3px 8px;\n  margin: 5px 10px;\n}\n.handleArea {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n}\n.handleBtns {\n  position: relative;\n  display: inline-block;\n  width: 400px;\n  height: 266px;\n}\n.btn1 {\n  position: absolute;\n  width: 100px;\n  height: 70px;\n  line-height: 70px;\n}\n.top {\n  top: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.btm {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n}\n.lft {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto 0;\n}\n.rit {\n  top: 0;\n  bottom: 0;\n  right: 0;\n  margin: auto 0;\n}\n.fall {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.finaScroe {\n  position: fixed;\n  right: 10px;\n  bottom: 0;\n  color: red;\n}\n","",{version:3,sources:["F:/repository/projects/diamonds_eliminate/src/layout.less","layout.less"],names:[],mappings:"AACA;EACE,SAAA;EACA,UAAA;ACAF;ADEA;EACE,oCAAA;ACAF;ADEA;EACE,kBAAA;EACA,qBAAA;EACA,WAAA;EACA,kBAAA;ACAF;ADEA;EACE,uBAAA;EACA,qBAAA;EACA,kBAAA;ACAF;ADEA;EACE,YAAA;ACAF;ADGA;EACE,qBAAA;EACA,WAAA;EACA,YAAA;EACA,sBAAA;EACA,uBAAA;ACDF;ADGA;EACE,sBAAA;EACA,sBAAA;ACDF;ADMA;EACE,kBAAA;EACA,MAAA;EAAQ,QAAA;EAAU,SAAA;EAAW,OAAA;EAC7B,YAAA;EACA,aAAA;EACA,YAAA;EACA,eAAA;EACA,WAAA;ACDF;ADIA;EACE,kBAAA;ACFF;ADIA;EACE,gBAAA;EACA,gBAAA;ACFF;ADKA;EACE,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,iBAAA;ACHF;ADKA;EACE,kBAAA;EACA,qBAAA;EACA,YAAA;EACA,aAAA;ACHF;ADKA;EACE,kBAAA;EACA,YAAA;EACA,YAAA;EACA,iBAAA;ACHF;ADKA;EACE,MAAA;EACA,OAAA;EAAS,QAAA;EACT,cAAA;ACFF;ADIA;EACE,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,YAAA;ACFF;ADIA;EACE,MAAA;EACA,SAAA;EACA,OAAA;EACA,cAAA;ACFF;ADIA;EACE,MAAA;EACA,SAAA;EACA,QAAA;EACA,cAAA;ACFF;ADIA;EACE,SAAA;EACA,OAAA;EAAS,QAAA;EACT,cAAA;ACDF;ADIA;EACE,eAAA;EACA,WAAA;EACA,SAAA;EACA,UAAA;ACFF",file:"layout.less",sourcesContent:["\n* {\n  margin: 0; \n  padding: 0; \n}\nbody {\n  background: rgba(238, 238, 238, 0.1);\n}\n.layout {\n  text-align: center;\n  display: inline-block;\n  margin: 5px; \n  position: relative;\n}\n.wrap {\n  outline: 2px solid #000;\n  display: inline-block;\n  position: relative;\n}\n.row {\n  font-size: 0; \n}\n\n.cell {\n  display: inline-block;\n  width: 33px;\n  height: 33px;\n  box-sizing: border-box;\n  border: 1px dashed #eee;\n}\n.cell[bg] {\n  background-color: #333;\n  border: 2px solid #aaa;\n  // outline: 1px solid #333;\n}\n\n\n.score {\n  position: absolute;\n  top: 0; right: 0; bottom: 0; left: 0; \n  width: 200px; \n  height: 200px;\n  margin: auto;\n  font-size: 20px; \n  color: #000;\n}\n\n.functionArea {\n  text-align: center;\n}\n.btn {\n  padding: 3px 8px;\n  margin: 5px 10px;\n}\n\n.handleArea {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n}\n.handleBtns {\n  position: relative;\n  display: inline-block;\n  width: 400px;\n  height: 266px;\n}\n.btn1 {\n  position: absolute;\n  width: 100px; \n  height: 70px;\n  line-height: 70px;\n}\n.top {\n  top: 0; \n  left: 0; right: 0;\n  margin: 0 auto;\n}\n.btm {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n}\n.lft {\n  top: 0; \n  bottom: 0; \n  left: 0; \n  margin: auto 0;\n}\n.rit {\n  top: 0; \n  bottom: 0; \n  right: 0; \n  margin: auto 0;\n}\n.fall {\n  bottom: 0; \n  left: 0; right: 0;\n  margin: 0 auto;\n}\n\n.finaScroe {\n  position: fixed;\n  right: 10px; \n  bottom: 0; \n  color: red;\n}\n\n\n\n","* {\n  margin: 0;\n  padding: 0;\n}\nbody {\n  background: rgba(238, 238, 238, 0.1);\n}\n.layout {\n  text-align: center;\n  display: inline-block;\n  margin: 5px;\n  position: relative;\n}\n.wrap {\n  outline: 2px solid #000;\n  display: inline-block;\n  position: relative;\n}\n.row {\n  font-size: 0;\n}\n.cell {\n  display: inline-block;\n  width: 33px;\n  height: 33px;\n  box-sizing: border-box;\n  border: 1px dashed #eee;\n}\n.cell[bg] {\n  background-color: #333;\n  border: 2px solid #aaa;\n}\n.score {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 200px;\n  height: 200px;\n  margin: auto;\n  font-size: 20px;\n  color: #000;\n}\n.functionArea {\n  text-align: center;\n}\n.btn {\n  padding: 3px 8px;\n  margin: 5px 10px;\n}\n.handleArea {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n}\n.handleBtns {\n  position: relative;\n  display: inline-block;\n  width: 400px;\n  height: 266px;\n}\n.btn1 {\n  position: absolute;\n  width: 100px;\n  height: 70px;\n  line-height: 70px;\n}\n.top {\n  top: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.btm {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n}\n.lft {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto 0;\n}\n.rit {\n  top: 0;\n  bottom: 0;\n  right: 0;\n  margin: auto 0;\n}\n.fall {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.finaScroe {\n  position: fixed;\n  right: 10px;\n  bottom: 0;\n  color: red;\n}\n"]}])},function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map(function(n){var e=function(t,n){var e=t[1]||"",i=t[3];if(!i)return e;if(n&&"function"==typeof btoa){var o=(s=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[e].concat(r).concat([o]).join("\n")}var s;return[e].join("\n")}(n,t);return n[2]?"@media "+n[2]+"{"+e+"}":e}).join("")},n.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];null!=s[0]&&i[s[0]]||(e&&!s[2]?s[2]=e:e&&(s[2]="("+s[2]+") and ("+e+")"),n.push(s))}},n}},function(t,n,e){var i,o,r={},s=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),a=function(t){var n={};return function(t,e){if("function"==typeof t)return t();if(void 0===n[t]){var i=function(t,n){return n?n.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}n[t]=i}return n[t]}}(),c=null,l=0,u=[],A=e(4);function p(t,n){for(var e=0;e<t.length;e++){var i=t[e],o=r[i.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(g(i.parts[s],n))}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(g(i.parts[s],n));r[i.id]={id:i.id,refs:1,parts:a}}}}function f(t,n){for(var e=[],i={},o=0;o<t.length;o++){var r=t[o],s=n.base?r[0]+n.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(a):e.push(i[s]={id:s,parts:[a]})}return e}function d(t,n){var e=a(t.insertInto);if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?e.insertBefore(n,i.nextSibling):e.appendChild(n):e.insertBefore(n,e.firstChild),u.push(n);else if("bottom"===t.insertAt)e.appendChild(n);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertAt.before,e);e.insertBefore(n,o)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var n=u.indexOf(t);n>=0&&u.splice(n,1)}function m(t){var n=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return e.nc}();i&&(t.attrs.nonce=i)}return v(n,t.attrs),d(t,n),n}function v(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function g(t,n){var e,i,o,r;if(n.transform&&t.css){if(!(r="function"==typeof n.transform?n.transform(t.css):n.transform.default(t.css)))return function(){};t.css=r}if(n.singleton){var s=l++;e=c||(c=m(n)),i=E.bind(null,e,s,!1),o=E.bind(null,e,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(e=function(t){var n=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(n,t.attrs),d(t,n),n}(n),i=function(t,n,e){var i=e.css,o=e.sourceMap,r=void 0===n.convertToAbsoluteUrls&&o;(n.convertToAbsoluteUrls||r)&&(i=A(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,e,n),o=function(){h(e),e.href&&URL.revokeObjectURL(e.href)}):(e=m(n),i=function(t,n){var e=n.css,i=n.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}.bind(null,e),o=function(){h(e)});return i(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;i(t=n)}else o()}}t.exports=function(t,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(n=n||{}).attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=s()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var e=f(t,n);return p(e,n),function(t){for(var i=[],o=0;o<e.length;o++){var s=e[o];(a=r[s.id]).refs--,i.push(a)}t&&p(f(t,n),n);for(o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete r[a.id]}}}};var b,y=(b=[],function(t,n){return b[t]=n,b.filter(Boolean).join("\n")});function E(t,n,e,i){var o=e?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(n,o);else{var r=document.createTextNode(o),s=t.childNodes;s[n]&&t.removeChild(s[n]),s.length?t.insertBefore(r,s[n]):t.appendChild(r)}}},function(t,n){t.exports=function(t){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var e=n.protocol+"//"+n.host,i=e+n.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,n){var o,r=n.trim().replace(/^"(.*)"$/,function(t,n){return n}).replace(/^'(.*)'$/,function(t,n){return n});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?e+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,n){EventTarget.prototype.evtMaps={},EventTarget.prototype.on=function(t,n){this.evtMaps[t]||(this.evtMaps[t]=[]),this.evtMaps[t].push(n),this.addEventListener(t,n)},EventTarget.prototype.off=function(t,n){var e=this;if(n)this.removeEventListener(t,n);else{var i=this.evtMaps[t];i&&i.forEach(function(n,i){e.removeEventListener(t,n)})}}},function(t,n,e){"use strict";e.r(n);e(0),e(5);function i(t,n){return t+Math.round((n-t)*Math.random())}function o(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t){t.list=[],t.isPause=!1,t.isGameOver=!1,t.gameStartTime=Date.now(),t.hardLevel=33}var s,a,c,l,u,A,p,f,d,h=function(){function t(n,e,i,o,r){if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._rows=n,this._cols=e,this._time=i,this._elems=o,this._gameWrap=o.wrap,this.constructor.list.push(this),!r)return this;this.blocks=[{position:[],styleList:[{position:[[0,0],[0,1],[0,2],[0,3]],range:[0,e-4]},{position:[[0,0],[1,0],[2,0],[3,0]],range:[0,e-1]}],styleIdx:0,isDone:!1},{position:[],styleList:[{position:[[0,0],[0,1],[1,0],[1,1]],range:[0,e-2]}],styleIdx:0,isDone:!1},{position:[],styleList:[{position:[[0,0],[1,0],[1,1],[2,1]],range:[0,e-2]},{position:[[0,1],[0,2],[1,0],[1,1]],range:[0,e-3]}],styleIdx:0,isDone:!1},{position:[],styleList:[{position:[[0,1],[1,0],[1,1],[2,0]],range:[0,e-2]},{position:[[0,0],[0,1],[1,1],[1,2]],range:[0,e-3]}],styleIdx:0,isDone:!1},{position:[],styleList:[{position:[[0,0],[1,0],[1,1],[1,2]],range:[0,e-3]},{position:[[0,0],[0,1],[1,0],[2,0]],range:[0,e-2]},{position:[[0,0],[0,1],[0,2],[1,2]],range:[0,e-3]},{position:[[0,1],[1,1],[2,0],[2,1]],range:[0,e-2]}],styleIdx:0,isDone:!1},{position:[],styleList:[{position:[[0,2],[1,0],[1,1],[1,2]],range:[0,e-3]},{position:[[0,0],[1,0],[2,0],[2,1]],range:[0,e-2]},{position:[[0,0],[0,1],[0,2],[1,0]],range:[0,e-3]},{position:[[0,0],[0,1],[1,1],[2,1]],range:[0,e-2]}],styleIdx:0,isDone:!1},{position:[],styleList:[{position:[[0,1],[1,0],[1,1],[1,2]],range:[0,e-3]},{position:[[0,0],[1,0],[1,1],[2,0]],range:[0,e-2]},{position:[[0,0],[0,1],[0,2],[1,1]],range:[0,e-3]},{position:[[0,1],[1,0],[1,1],[2,1]],range:[0,e-2]}],styleIdx:0,isDone:!1}],this.currentBlock=null,this.score=0;var s=[];this._wrap=null,this.elem=this.insertElems();for(var a=0;a<n;a++){var c=document.createElement("div");c.setAttribute("class","row"),this._wrap.appendChild(c),s.push([]);for(var l=0;l<e;l++){var u=document.createElement("div");u.setAttribute("class","cell"),c.appendChild(u),s[a].push(u)}}this.state=s,this.bindEvents(o),this._gameWrap.appendChild(this.elem),this.createBlock()}var n,e,s;return n=t,s=[{key:"bindGlobalEvents",value:function(t){var n=this,e=t.startBtn,i=t.pauseBtn,o=t.addGame,s=t.finaScroe;e.addEventListener("click",function(t){n.list.forEach(function(t){t.elem&&t.elem.remove(),window.off("keydown");var n=t._elems,e=n.upBtn,i=n.ritBtn,o=n.btmBtn,r=n.lftBtn,s=n.fallBtn;e.off("click"),i.off("click"),o.off("click"),r.off("click"),s.off("click")});var e=n.list[0];r(n),s.textContent="当前难度积分奖励系数为: 0",new n(e._rows,e._cols,e._time,e._elems,!0)}),i.addEventListener("click",function(t){n.isPause?i.textContent="暂停":i.textContent="继续",n.isPause=!n.isPause}),o.addEventListener("click",function(t){if(n.isGameOver)alert("游戏已结束!");else{var e=n.list[0];if(Date.now()-n.gameStartTime>7e3)return window.alert("需在游戏开始的前 7s 内增加难度,否则不增加奖励分!"),n.hardLevel=0,s.textContent="当前难度积分奖励系数为: ".concat(n.hardLevel),void new n(e._rows,e._cols,e._time,e._gameWrap,!0);s.textContent="当前难度积分奖励系数为: ".concat(n.list.length*n.hardLevel),new n(e._rows,e._cols,e._time,e._elems,!0)}})}}],(e=[{key:"insertElems",value:function(){var t=document.createElement("div");return t.setAttribute("class","layout"),this._wrap=document.createElement("div"),this._wrap.setAttribute("class","wrap"),t.appendChild(this._wrap),t}},{key:"bindEvents",value:function(t){var n=this,e=t.upBtn,i=t.ritBtn,o=t.btmBtn,r=t.lftBtn,s=t.fallBtn;window.on("keydown",function(t){var e=t.code;"F5"!==e&&"F12"!==e&&t.preventDefault(),n[e]&&!n.constructor.isGameOver&&n[e](n.currentBlock,1)}),e.on("click",function(t){n.constructor.isGameOver||n.ArrowUp(n.currentBlock)}),i.on("click",function(t){n.constructor.isGameOver||n.ArrowRight(n.currentBlock,1)}),o.on("click",function(t){n.constructor.isGameOver||n.ArrowDown(n.currentBlock,1)}),r.on("click",function(t){n.constructor.isGameOver||n.ArrowLeft(n.currentBlock,1)}),s.on("click",function(t){n.constructor.isGameOver||n.Space(n.currentBlock)})}},{key:"createBlock",value:function(){var t=this,n=i(0,this.blocks.length-1);this.currentBlock=JSON.parse(JSON.stringify(this.blocks[n])),this.currentBlock.styleIdx=i(0,this.currentBlock.styleList.length-1),this.currentBlock.position=JSON.parse(JSON.stringify(this.currentBlock.styleList[this.currentBlock.styleIdx].position));var e=this.currentBlock.styleList[this.currentBlock.styleIdx],o=i(e.range[0],e.range[1]);this.currentBlock.position.forEach(function(n,e){n[1]+=o;var i=t.state[n[0]][n[1]];i.setAttribute("bg","true"),i.setAttribute("active","true")}),this.currentBlock=this.currentBlock,this.autoDown(this.currentBlock)}},{key:"autoDown",value:function(t){var n=this;setTimeout(function(){t.isDone||(n.ArrowDown(t,1),n.autoDown(t))},this._time)}},{key:"clearBlock",value:function(t){var n=this;t.position.forEach(function(t,e){var i=n.state[t[0]][t[1]];i.removeAttribute("bg"),i.removeAttribute("active")})}},{key:"ArrowUp",value:function(t){var n=this;if(!this.constructor.isPause){var e=t.styleList[t.styleIdx%t.styleList.length].position,i=t.styleList[(t.styleIdx+1)%t.styleList.length].position;t.position.every(function(t,o){var r=t[0]+i[o][0]-e[o][0],s=t[1]+i[o][1]-e[o][1],a=n.state[r];return a&&a[s]&&(!a[s].getAttribute("bg")||a[s].getAttribute("active"))})&&(this.clearBlock(t),t.styleIdx+=1,t.position.forEach(function(t,o){t[0]+=i[o][0]-e[o][0],t[1]+=i[o][1]-e[o][1];var r=n.state[t[0]][t[1]];r.setAttribute("bg","true"),r.setAttribute("active","true")}))}}},{key:"ArrowLeft",value:function(t,n){var e=this;!t.position.every(function(t,i){var o=e.state[t[0]][t[1]-n];return o&&(o.getAttribute("active")||!o.getAttribute("bg"))})||t.isDone||this.constructor.isPause||(this.clearBlock(t),t.position.forEach(function(t,i){t[1]-=n;var o=e.state[t[0]][t[1]];o.setAttribute("bg","true"),o.setAttribute("active","true")}))}},{key:"ArrowRight",value:function(t,n){var e=this;!t.position.every(function(t,i){var o=e.state[t[0]][t[1]+n];return o&&(o.getAttribute("active")||!o.getAttribute("bg"))})||t.isDone||this.constructor.isPause||(this.clearBlock(t),t.position.forEach(function(t,i){t[1]+=n;var o=e.state[t[0]][t[1]];o.setAttribute("bg","true"),o.setAttribute("active","true")}))}},{key:"ArrowDown",value:function(t,n){var e=this;t.isDone||this.constructor.isPause||(t.position.every(function(t,i){var o=e.state[t[0]+n];return o&&(o[t[1]].getAttribute("active")||!o[t[1]].getAttribute("bg"))})?(this.clearBlock(t),t.position.forEach(function(t,i){t[0]+=n;var o=e.state[t[0]][t[1]];o.setAttribute("bg","true"),o.setAttribute("active","true")})):this.bottomCall(t))}},{key:"Space",value:function(t){var n=this,e=t.position.reduce(function(t,e,i){var o=n.state.slice(e[0]).findIndex(function(t,n){return t[e[1]].getAttribute("bg")&&!t[e[1]].getAttribute("active")});return o=-1===o?n._rows:o+e[0],t-(o-=e[0])>0?o:t},99999999);this.ArrowDown(t,e-1),this.bottomCall(t)}},{key:"bottomCall",value:function(t){t.isDone=!0,this.uodateDoneBlock(t),this.constructor.isGameOver=this.checkGameOver(),this.constructor.isGameOver?this.gameOverAnimation():(this.eliminateRows(),this.createBlock())}},{key:"uodateDoneBlock",value:function(t){var n=this;t.position.forEach(function(t,e){n.state[t[0]][t[1]].removeAttribute("active")})}},{key:"eliminateRows",value:function(){var t=this;this.state.forEach(function(n,e){n.every(function(t){return t.getAttribute("bg")})&&(n.forEach(function(t){t.removeAttribute("bg")}),t.state.splice(e,1),t.state.splice(0,0,n),t._wrap.prepend(t._wrap.querySelectorAll(".row")[e]),t.score++)})}},{key:"checkGameOver",value:function(){return this.constructor.isGameOver||this.state[0].some(function(t,n){return t.getAttribute("bg")})}},{key:"gameOverAnimation",value:function(){var t=this,n=this.state,e=0;!function i(o,r){n[o].forEach(function(t,n){r>0?t.setAttribute("bg",""):t.removeAttribute("bg")}),o+r<n.length&&o+r>=0?setTimeout(function(){i(o+r,r)},14):(e++,setTimeout(function(){o>0&&i(n.length-1,-1)},128),2===e&&setTimeout(function(){var n=document.createElement("div");n.textContent="得分: ".concat(t.score),n.setAttribute("class","score"),t.elem.appendChild(n);var e=0;t.constructor.list.forEach(function(t,n){e+=t.score}),e+=e*(t.constructor.list.length-1)*t.constructor.hardLevel,document.querySelector(".finaScroe").textContent="最终得分: ".concat(e)},123))}(0,1)}}])&&o(n.prototype,e),s&&o(n,s),t}();r(h),s=navigator.userAgent.toLowerCase(),a="ipad"==s.match(/ipad/i),c="iphone os"==s.match(/iphone os/i),l="midp"==s.match(/midp/i),u="rv:1.2.3.4"==s.match(/rv:1.2.3.4/i),A="ucweb"==s.match(/ucweb/i),p="android"==s.match(/android/i),f="windows ce"==s.match(/windows ce/i),d="windows mobile"==s.match(/windows mobile/i),a||c||l||u||A||p||f||d||(document.querySelector(".handleArea").style.display="none"),new h(22,12,700,{wrap:document.querySelector("#gameWrap"),upBtn:document.getElementById("upBtn"),ritBtn:document.getElementById("ritBtn"),btmBtn:document.getElementById("btmBtn"),lftBtn:document.getElementById("lftBtn"),fallBtn:document.getElementById("fallBtn")}),h.bindGlobalEvents({startBtn:document.getElementById("startGame"),pauseBtn:document.getElementById("pauseGame"),addGame:document.getElementById("addMoreGame"),finaScroe:document.getElementById("score")})}]);